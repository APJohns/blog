---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'a'> {
  name: string;
  date: string;
}

const { href, class: className, name, date, ...props } = Astro.props;

const { pathname } = Astro.url;
const subpath = pathname.match(/[^\/]+/g);
const isActive = href === pathname || href === '/' + subpath?.[0];
---

<a href={href} class:list={[className, { active: isActive, noteLink: true }]} {...props}>
  <div class="note-name">{name}</div>
  <div>{date}</div>
</a>

<style>
  .noteLink {
    display: grid;
    grid-template-columns: 1fr;
    border: 0;
    border-radius: 1rem;
    padding: 0.75rem 1rem;
    text-align: left;
    text-decoration: none;
    font-size: var(--fs-subtle);
    color: rgb(var(--gray-dark));
    background: transparent;

    &:hover {
      background: #eaeaea;
    }

    &.active {
      background: var(--accent);
    }
  }

  .note-name {
    font-weight: var(--font-weight-semibold);
  }
</style>
